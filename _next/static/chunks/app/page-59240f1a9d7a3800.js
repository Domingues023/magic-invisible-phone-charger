(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7535:function(e,t,r){Promise.resolve().then(r.bind(r,309))},309:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Page}});var n=r(7437),s=r(2265),a=r(6974);function PaymentModal(e){let{onClose:t}=e,r=(0,a.useStripe)(),l=(0,a.useElements)(),[i,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(!1),handleSubmit=async e=>{if(e.preventDefault(),!r||!l)return;let{error:t}=await r.confirmPayment({elements:l,confirmParams:{return_url:`${window.location.origin}/completion`}});t&&o(t.message??"An unexpected error occurred.")};return(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"Complete Your Purchase"}),(0,n.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700","aria-label":"Close",children:"\xd7"})]}),(0,n.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,n.jsx)(a.PaymentElement,{options:{layout:"tabs"},onChange:e=>{d(e.complete),e.error?o(e.error.message||""):o("")}}),(0,n.jsx)(a.AddressElement,{options:{mode:"shipping",defaultValues:{address:{country:"CA"}},fields:{phone:"never"}}}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)("button",{type:"submit",disabled:!r||!c,className:"w-full bg-gradient-to-r from-purple-600 to-blue-500 text-white px-6 py-3 rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50",children:"Pay Now"}),(0,n.jsx)("button",{type:"button",onClick:t,className:"w-full bg-gray-200 text-gray-800 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]}),i&&(0,n.jsx)("div",{className:"text-red-500 text-sm mt-2 p-3 bg-red-50 rounded-lg",children:i})]})]})})}var l=r(7106);let i=(0,l.J)("pk_test_51QxhDfRuevrBvMeWIazXsaON7UzdTpQIjyfSPYsfR2YV0uqpDRFNqjDXQYPHL7qbgTiQfwKZKm1fRO7oXQuKpCC600fD6WpFSq"),o={theme:"stripe",variables:{colorPrimary:"#6366f1"}};function StripeProvider(e){let{children:t,clientSecret:r}=e;return(0,n.jsx)(a.Elements,{stripe:i,options:{clientSecret:r,appearance:o},children:t})}function Page(){let[e,t]=(0,s.useState)(!1),[r,a]=(0,s.useState)(),handleBuyNow=async()=>{try{let e=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:3999})}),r=await e.json();a(r.clientSecret),t(!0)}catch(e){console.error("Error:",e),alert("Something went wrong. Please try again.")}};return(0,n.jsxs)("main",{children:[e&&r&&(0,n.jsx)(StripeProvider,{clientSecret:r,children:(0,n.jsx)(PaymentModal,{onClose:()=>t(!1)})}),(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-purple-600 to-blue-500 flex flex-col items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full text-center space-y-6",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Magic Invisible Phone Charger"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Experience the future of wireless charging with our revolutionary invisible charger!"}),(0,n.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:"$39.99"}),(0,n.jsx)("button",{onClick:handleBuyNow,className:"w-full bg-gradient-to-r from-purple-600 to-blue-500 text-white px-6 py-3 rounded-lg hover:opacity-90 transition-opacity",children:"Buy Now"})]})})]})}}},function(e){e.O(0,[298,971,472,744],function(){return e(e.s=7535)}),_N_E=e.O()}]);